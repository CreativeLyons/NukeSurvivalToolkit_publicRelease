BackdropNode {
 inputs 0
 name BackdropNode1
 tile_color 0x8e8e3800
 label "default node"
 note_font_size 42
 xpos 64
 ypos -724
 bdwidth 243
 bdheight 195
}
BackdropNode {
 inputs 0
 name BackdropNode2
 tile_color 0x3c30ff
 label "<b>different droplet in different shape with DOF</b>\n\n<font size=2>- DOF inside the node with recommend setting</font>"
 note_font_size 42
 xpos 27
 ypos -381
 bdwidth 1025
 bdheight 1561
}
BackdropNode {
 inputs 0
 name BackdropNode3
 tile_color 0x3c30ff
 label "<b>different droplet in different shape with DOF</b>\n\n<font size=2>- can use DOF(zDefocus) precedural in a single node.\n- when defocus value is 1 or 0 inside the gizmo, the node will be disable to avoid drag down the speed.</font>"
 note_font_size 42
 xpos 1200
 ypos -389
 bdwidth 1493
 bdheight 1552
}
BackdropNode {
 inputs 0
 name BackdropNode4
 tile_color 0x3c30ff
 label "<b>different droplet in different shape in focus</b>"
 note_font_size 42
 xpos 2954
 ypos -408
 bdwidth 1493
 bdheight 1552
}
BackdropNode {
 inputs 0
 name BackdropNode5
 tile_color 0x3c30ff
 label "<b>droplet in jiggle motion</b>\n\n<font size=2>- like windshield in motion car (I use expression to generate a random motion on 'center' knob)</font>"
 note_font_size 42
 xpos 4650
 ypos -397
 bdwidth 1493
 bdheight 1552
}
BackdropNode {
 inputs 0
 name BackdropNode6
 tile_color 0x3c30ff
 label "<b>droplet pop in on lens</b>\n\n<font size=2>- I set the lifetime in rotopaint, but it can be any kind of animated matte."
 note_font_size 42
 xpos 6431
 ypos -398
 bdwidth 1701
 bdheight 1542
}
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44200000 x43b40000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44614000 x438b0000 x3b800080}
       {x44614000 x438a8000 x3e4c60cc}
       {x44614000 x438a0000 x3e5260d2}
       {x44618000 x43890000 x3e6068e0}
       {x44618000 x43888000 x3e6670e6}
       {x44618000 x43880000 x3e6a70ea}
       {x44620000 x43880000 x3e6c70ec}
       {x44620000 x43868000 x3e7270f2}
       {x44620000 x43860000 x3e6e70ee}
       {x44624000 x43860000 x3e7678f6}}}
     {t x4461a666 x4388599a}
     {a ro 0 go 0 bo 0 ao 0 bs x42000000 bu 1 str 1 spx x44200000 spy x43b40000 sb 1 tt x41880000 ltm x41300000 ltn x41000000 ltt x40400000}}}}}}
 toolbox {brush {
  { selectAll bs 32 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 32 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 32
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "frame to end"
 lifetime_start 8
 lifetime_end 11
 motionblur_on true
 brush_size 32
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint14
 label "x8 to the end"
 xpos 6593
 ypos 803
}
Read {
 inputs 0
 file_type jpeg
 file <<<replace>>>/MJT_Labs/Draw/WaterLens_11/demo_script/waterLensExampleBG.jpg
 format "1280 720 0 0 1280 720 1 HD_720"
 origset true
 name Read5
 xpos 7779
 ypos 27
}
Dot {
 name Dot21
 xpos 7813
 ypos 290
}
set N28da0c90 [stack 0]
Dot {
 name Dot22
 xpos 7642
 ypos 290
}
set N28da1700 [stack 0]
Dot {
 name Dot23
 xpos 7354
 ypos 290
}
set N28da3bc0 [stack 0]
Dot {
 name Dot24
 xpos 7095
 ypos 290
}
set N28da6080 [stack 0]
Dot {
 name Dot25
 xpos 6782
 ypos 290
}
Group {
 inputs 2
 name WaterLens14
 tile_color 0xffccff
 note_font Verdana
 xpos 6748
 ypos 800
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {902.5 274}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set Nfec08420 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $Nfec08420
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set Nfec3f360 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set Nfec45ee0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set Nfec4c920 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $Nfec4c920
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $Nfec45ee0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set Nfec82590 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set Nfec84910 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $Nfec84910
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $Nfec82590
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set Nfed1e630 [stack 0]
push $Nfed1e630
push $Nfec3f360
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x42d20000 x43ae8000 x3c904090}
       {x42d40000 x43ae8000 x3e2248a2}
       {x42d80000 x43ae8000 x3e5868d8}
       {x42dc0000 x43af0000 x3e6a70ea}
       {x42e20000 x43af8000 x3e7e78fe}
       {x42e60000 x43b08000 x3e864086}
       {x42ec0000 x43b18000 x3e8b448b}
       {x42f40000 x43b30000 x3e8d448d}
       {x42fc0000 x43b50000 x3e8f448f}
       {x43030000 x43b70000 x3e914491}
       {x43070000 x43b88000 x3e914491}
       {x430c0000 x43ba8000 x3e954895}
       {x43110000 x43bc8000 x3e944894}
       {x43150000 x43be8000 x3e954895}
       {x43190000 x43c08000 x3e954895}
       {x431c0000 x43c18000 x3e944894}
       {x431f0000 x43c30000 x3e944894}
       {x43200000 x43c40000 x3e964896}
       {x43230000 x43c50000 x3e974897}
       {x43230000 x43c58000 x3e974897}
       {x43240000 x43c60000 x3e984898}
       {x43250000 x43c70000 x3e994899}
       {x43250000 x43c78000 x3e9b4c9b}
       {x43270000 x43c80000 x3e9f4c9f}
       {x43270000 x43c88000 x3e9f4c9f}
       {x43270000 x43c80000 x3e9b4c9b}
       {x43270000 x43c78000 x3e9b4c9b}
       {x43250000 x43c60000 x3e9d4c9d}
       {x43250000 x43c58000 x3e9d4c9d}
       {x43240000 x43c40000 x3e9d4c9d}
       {x43240000 x43c30000 x3e9d4c9d}
       {x43240000 x43c18000 x3e9d4c9d}
       {x43240000 x43bf8000 x3e9e4c9e}
       {x43240000 x43be0000 x3e9d4c9d}
       {x43240000 x43bc0000 x3e9d4c9d}
       {x43240000 x43b98000 x3e9e4c9e}
       {x43240000 x43b78000 x3e9e4c9e}
       {x43240000 x43b50000 x3e9d4c9d}
       {x43240000 x43b30000 x3e9d4c9d}
       {x43250000 x43b08000 x3e9d4c9d}
       {x43270000 x43ae8000 x3e9d4c9d}
       {x43280000 x43ac0000 x3e9d4c9d}
       {x43290000 x43aa0000 x3e9d4c9d}
       {x432b0000 x43a78000 x3e9f4c9f}
       {x432c0000 x43a58000 x3ea04ca0}
       {x432e0000 x43a38000 x3e9f4c9f}
       {x43300000 x43a18000 x3ea04ca0}
       {x43320000 x439f8000 x3ea04ca0}
       {x43340000 x439e0000 x3e9f4c9f}
       {x43360000 x439c0000 x3ea04ca0}
       {x43370000 x439a8000 x3e9f4c9f}
       {x43390000 x43998000 x3e9f4c9f}
       {x433b0000 x43988000 x3e9f4c9f}
       {x433d0000 x43978000 x3ea04ca0}
       {x433e0000 x43968000 x3e9f4c9f}
       {x433f0000 x43960000 x3e9f4c9f}
       {x43400000 x43960000 x3ea04ca0}
       {x43420000 x43958000 x3e9f4c9f}
       {x43420000 x43950000 x3e9f4c9f}
       {x43430000 x43950000 x3ea04ca0}
       {x43440000 x43940000 x3e9f4c9f}
       {x43460000 x43940000 x3ea04ca0}
       {x43470000 x43938000 x3e9c4c9c}
       {x43480000 x43938000 x3e844084}
       {x43490000 x43938000 x3ddc60dc}}}
     {t x43232762 x43b001f8}
     {a ro 0 go 0 bo 0 ao 0 bs x43300000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000 ltm x41300000 ltn x40a00000 ltt x40400000}}}}}}
 toolbox {brush {
  { selectAll bs 176 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush bs 176 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 176
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "frame to end"
 lifetime_start 5
 lifetime_end 11
 motionblur_on true
 motionblur_shutter_offset_type centred
 openspline_width 1
 brush_size 176
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint15
 label "x5 to the end"
 xpos 6911
 ypos 696
}
push $N28da6080
Group {
 inputs 2
 name WaterLens15
 tile_color 0xffccff
 note_font Verdana
 xpos 7061
 ypos 693
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {183 331}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 bend -0.49
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.3
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set Nfed41a60 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $Nfed41a60
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set Nfed56980 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set Nfed5d500 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set Nfed63f40 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $Nfed63f40
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $Nfed5d500
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set Nfeda17f0 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set Nfeda3cb0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $Nfeda3cb0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $Nfeda17f0
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set Nfef3d610 [stack 0]
push $Nfef3d610
push $Nfed56980
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup OpenSpline1 1049088 bezier
     {{cc
       {f 1056800}
       {p
        {}
        {{a osw 1 osf 0}	x44028000 x44220000}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {{a osw 1 osf x409c5a65}	x440d54e8 x43cf82d2}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {{a osw 1 osf x40fbe1c8}	x44060000 x43300000}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {{a osw 1 osf x421e6637}	x440f0000 x42b40000}
        {x40a87080 xc1080ae8}}}
      {cc
       {f 1056800}
       {p
        {}
        {}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {}
        {x40a87080 xc1080ae8}}}}
     {t x440a4000 x43a74000}
     {a osbe 0 osee 0 osw 1 osf 0 str 1 tt x41200000 ft x40400000 a
   {{x41300000 0 0 1 1 1}
    {x41400000 1 1 1 0 1}}     b
   {{x41300000 0 0 1 1 1}
    {x41400000 1 1 1 0 1}}     g
   {{x41300000 0 0 1 1 1}
    {x41400000 1 1 1 0 1}}     r
   {{x41300000 0 0 1 1 1}
    {x41400000 1 1 1 0 1}}}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {320 240}
 color {{curve x11 0 1}}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 feather_type smooth
 openspline_width 1
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 name RotoPaint16
 label "x11 to the end"
 xpos 7181
 ypos 564
}
push $N28da3bc0
Group {
 inputs 2
 name WaterLens16
 tile_color 0xffccff
 note_font Verdana
 xpos 7320
 ypos 561
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {517 118}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.975
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N28df8100 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N28df8100
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set Nb8110a0 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set Nb817c20 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set Nb81e660 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $Nb81e660
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $Nb817c20
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set Nb85bf10 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set Nb85e3d0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $Nb85e3d0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $Nb85bf10
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.12
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set Nfefe1630 [stack 0]
push $Nfefe1630
push $Nb8110a0
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44780000 x43b60000 x3d4860c8}
       {x44780000 x43b50000 x3e874087}
       {x44780000 x43b40000 x3e944894}
       {x44780000 x43b30000 x3e9e4c9e}
       {x44788000 x43b10000 x3ead54ad}
       {x44790000 x43b00000 x3eb254b2}
       {x44790000 x43ae0000 x3eb658b6}
       {x44798000 x43ab0000 x3eb958b9}
       {x447a0000 x43a90000 x3ebb5cbb}
       {x447a8000 x43a60000 x3ebe5cbe}
       {x447b0000 x43a40000 x3ec15cc1}
       {x447b0000 x43a20000 x3ec15cc1}
       {x447b8000 x43a00000 x3ec360c3}
       {x447b8000 x439e0000 x3ebf5cbf}
       {x447c0000 x439d0000 x3ec25cc2}
       {x447c0000 x439c0000 x3ec25cc2}
       {x447c0000 x439b0000 x3ec25cc2}
       {x447c0000 x439a0000 x3ec25cc2}}}
     {t x447a1555 x43a7d555}
     {a ro 0 go 0 bo 0 ao 0 bs x42d80000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000 ltm x41c80000 ltn x40400000 ltt x40400000}}}}}}
 toolbox {brush {
  { selectAll bs 108 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 108 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 108
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "frame to end"
 lifetime_start 3
 lifetime_end 25
 motionblur_on true
 brush_size 108
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint17
 label "x3 to the end"
 xpos 7465
 ypos 456
}
push $N28da1700
Group {
 inputs 2
 name WaterLens17
 tile_color 0xffccff
 note_font Verdana
 xpos 7608
 ypos 453
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {1002 334}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.99
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1.5
 addUserKnob {7 bend R -1 1}
 bend -0.07
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set Nfee96b90 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $Nfee96b90
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set Nb910350 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set Nb916ed0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set Nb91d910 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $Nb91d910
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $Nb916ed0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set Nb88f110 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set Nb8915d0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $Nb8915d0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $Nb88f110
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  gain 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set Nba2b200 [stack 0]
push $Nba2b200
push $Nb910350
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Merge2 {
 inputs 2
 name Merge10
 xpos 7608
 ypos 568
}
Merge2 {
 inputs 2
 name Merge11
 xpos 7608
 ypos 700
}
Merge2 {
 inputs 2
 name Merge12
 xpos 7608
 ypos 807
}
push $N28da0c90
ZDefocus2 {
 size 25
 max_size 50
 legacy_resize_mode false
 show_legacy_resize_mode false
 bloom true
 bloom_gain 5
 name ZDefocus4
 xpos 7779
 ypos 505
}
Reformat {
 black_outside true
 name Reformat4
 xpos 7779
 ypos 593
}
Merge2 {
 inputs 2
 bbox B
 name Merge13
 xpos 7779
 ypos 807
}
Dot {
 name Dot26
 xpos 7813
 ypos 1336
}
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44780000 x43b60000 x3d4860c8}
       {x44780000 x43b50000 x3e874087}
       {x44780000 x43b40000 x3e944894}
       {x44780000 x43b30000 x3e9e4c9e}
       {x44788000 x43b10000 x3ead54ad}
       {x44790000 x43b00000 x3eb254b2}
       {x44790000 x43ae0000 x3eb658b6}
       {x44798000 x43ab0000 x3eb958b9}
       {x447a0000 x43a90000 x3ebb5cbb}
       {x447a8000 x43a60000 x3ebe5cbe}
       {x447b0000 x43a40000 x3ec15cc1}
       {x447b0000 x43a20000 x3ec15cc1}
       {x447b8000 x43a00000 x3ec360c3}
       {x447b8000 x439e0000 x3ebf5cbf}
       {x447c0000 x439d0000 x3ec25cc2}
       {x447c0000 x439c0000 x3ec25cc2}
       {x447c0000 x439b0000 x3ec25cc2}
       {x447c0000 x439a0000 x3ec25cc2}}}
     {t x447a1555 x43a7d555 0 xc3870000}
     {a ro 0 go 0 bo 0 ao 0 bs x435a0000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 108 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 108 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 108
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 218
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint9
 xpos 5095
 ypos 827
}
Read {
 inputs 0
 file_type jpeg
 file <<<replace>>>/MJT_Labs/Draw/WaterLens_11/demo_script/waterLensExampleBG.jpg
 format "1280 720 0 0 1280 720 1 HD_720"
 origset true
 name Read2
 xpos 5409
 ypos 47
}
Dot {
 name Dot12
 xpos 5443
 ypos 400
}
set N2784c1a0 [stack 0]
Dot {
 name Dot13
 xpos 5272
 ypos 400
}
Group {
 inputs 2
 name WaterLens9
 tile_color 0xffccff
 note_font Verdana
 xpos 5238
 ypos 820
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {{"curve + (random(0,frame)*3)-1.5" x1 735} {"curve + (random(1,frame)*3)-1.5" x1 338}}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.99
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1.5
 addUserKnob {7 bend R -1 1}
 bend -0.14
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N27af5580 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N27af5580
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N27b0e430 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N27b14fb0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27b1b9f0 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27b1b9f0
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N27b14fb0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N27b58e60 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27b5b320 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27b5b320
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N27b58e60
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  gain 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N27bf0450 [stack 0]
push $N27bf0450
push $N27b0e430
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
push $N2784c1a0
ZDefocus2 {
 size 25
 max_size 50
 legacy_resize_mode false
 show_legacy_resize_mode false
 bloom true
 bloom_gain 5
 name ZDefocus2
 xpos 5409
 ypos 574
}
Reformat {
 black_outside true
 name Reformat1
 xpos 5409
 ypos 662
}
Merge2 {
 inputs 2
 bbox B
 name Merge5
 xpos 5409
 ypos 827
}
Dot {
 name Dot27
 xpos 5443
 ypos 1390
}
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44200000 x43b40000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44614000 x438b0000 x3b800080}
       {x44614000 x438a8000 x3e4c60cc}
       {x44614000 x438a0000 x3e5260d2}
       {x44618000 x43890000 x3e6068e0}
       {x44618000 x43888000 x3e6670e6}
       {x44618000 x43880000 x3e6a70ea}
       {x44620000 x43880000 x3e6c70ec}
       {x44620000 x43868000 x3e7270f2}
       {x44620000 x43860000 x3e6e70ee}
       {x44624000 x43860000 x3e7678f6}}}
     {t x4461a666 x4388599a}
     {a ro 0 go 0 bo 0 ao 0 bs x42000000 bu 1 str 1 spx x44200000 spy x43b40000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 32 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 32 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 32
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 32
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint8
 xpos 3045
 ypos 795
}
Read {
 inputs 0
 file_type jpeg
 file <<<replace>>>/MJT_Labs/Draw/WaterLens_11/demo_script/waterLensExampleBG.jpg
 format "1280 720 0 0 1280 720 1 HD_720"
 origset true
 name Read1
 xpos 4229
 ypos 15
}
Dot {
 name Dot8
 xpos 4263
 ypos 278
}
set N26de1520 [stack 0]
Dot {
 name Dot7
 xpos 4092
 ypos 278
}
set N26de71a0 [stack 0]
Dot {
 name Dot19
 xpos 3804
 ypos 278
}
set N26de9660 [stack 0]
Dot {
 name Dot20
 xpos 3545
 ypos 278
}
set N26debb20 [stack 0]
Dot {
 name Dot11
 xpos 3232
 ypos 278
}
Group {
 inputs 2
 name WaterLens8
 tile_color 0xffccff
 note_font Verdana
 xpos 3198
 ypos 788
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {902.5 274}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N26e0bb80 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N26e0bb80
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N26e20aa0 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N26e27620 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N26e2e060 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N26e2e060
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N26e27620
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N26e6b910 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N26e6ddd0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N26e6ddd0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N26e6b910
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N26b7c6a0 [stack 0]
push $N26b7c6a0
push $N26e20aa0
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x42d20000 x43ae8000 x3c904090}
       {x42d40000 x43ae8000 x3e2248a2}
       {x42d80000 x43ae8000 x3e5868d8}
       {x42dc0000 x43af0000 x3e6a70ea}
       {x42e20000 x43af8000 x3e7e78fe}
       {x42e60000 x43b08000 x3e864086}
       {x42ec0000 x43b18000 x3e8b448b}
       {x42f40000 x43b30000 x3e8d448d}
       {x42fc0000 x43b50000 x3e8f448f}
       {x43030000 x43b70000 x3e914491}
       {x43070000 x43b88000 x3e914491}
       {x430c0000 x43ba8000 x3e954895}
       {x43110000 x43bc8000 x3e944894}
       {x43150000 x43be8000 x3e954895}
       {x43190000 x43c08000 x3e954895}
       {x431c0000 x43c18000 x3e944894}
       {x431f0000 x43c30000 x3e944894}
       {x43200000 x43c40000 x3e964896}
       {x43230000 x43c50000 x3e974897}
       {x43230000 x43c58000 x3e974897}
       {x43240000 x43c60000 x3e984898}
       {x43250000 x43c70000 x3e994899}
       {x43250000 x43c78000 x3e9b4c9b}
       {x43270000 x43c80000 x3e9f4c9f}
       {x43270000 x43c88000 x3e9f4c9f}
       {x43270000 x43c80000 x3e9b4c9b}
       {x43270000 x43c78000 x3e9b4c9b}
       {x43250000 x43c60000 x3e9d4c9d}
       {x43250000 x43c58000 x3e9d4c9d}
       {x43240000 x43c40000 x3e9d4c9d}
       {x43240000 x43c30000 x3e9d4c9d}
       {x43240000 x43c18000 x3e9d4c9d}
       {x43240000 x43bf8000 x3e9e4c9e}
       {x43240000 x43be0000 x3e9d4c9d}
       {x43240000 x43bc0000 x3e9d4c9d}
       {x43240000 x43b98000 x3e9e4c9e}
       {x43240000 x43b78000 x3e9e4c9e}
       {x43240000 x43b50000 x3e9d4c9d}
       {x43240000 x43b30000 x3e9d4c9d}
       {x43250000 x43b08000 x3e9d4c9d}
       {x43270000 x43ae8000 x3e9d4c9d}
       {x43280000 x43ac0000 x3e9d4c9d}
       {x43290000 x43aa0000 x3e9d4c9d}
       {x432b0000 x43a78000 x3e9f4c9f}
       {x432c0000 x43a58000 x3ea04ca0}
       {x432e0000 x43a38000 x3e9f4c9f}
       {x43300000 x43a18000 x3ea04ca0}
       {x43320000 x439f8000 x3ea04ca0}
       {x43340000 x439e0000 x3e9f4c9f}
       {x43360000 x439c0000 x3ea04ca0}
       {x43370000 x439a8000 x3e9f4c9f}
       {x43390000 x43998000 x3e9f4c9f}
       {x433b0000 x43988000 x3e9f4c9f}
       {x433d0000 x43978000 x3ea04ca0}
       {x433e0000 x43968000 x3e9f4c9f}
       {x433f0000 x43960000 x3e9f4c9f}
       {x43400000 x43960000 x3ea04ca0}
       {x43420000 x43958000 x3e9f4c9f}
       {x43420000 x43950000 x3e9f4c9f}
       {x43430000 x43950000 x3ea04ca0}
       {x43440000 x43940000 x3e9f4c9f}
       {x43460000 x43940000 x3ea04ca0}
       {x43470000 x43938000 x3e9c4c9c}
       {x43480000 x43938000 x3e844084}
       {x43490000 x43938000 x3ddc60dc}}}
     {t x43232762 x43b001f8}
     {a ro 0 go 0 bo 0 ao 0 bs x43300000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 176 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush bs 176 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 176
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 motionblur_shutter_offset_type centred
 openspline_width 1
 brush_size 176
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint4
 xpos 3365
 ypos 688
}
push $N26debb20
Group {
 inputs 2
 name WaterLens7
 tile_color 0xffccff
 note_font Verdana
 xpos 3511
 ypos 681
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {183 331}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 bend -0.49
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.3
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N26be4440 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N26be4440
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N235135f0 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N23519f10 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N23520950 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N23520950
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N23519f10
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N26f1d500 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N26f1f9c0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N26f1f9c0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N26f1d500
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N26fb42e0 [stack 0]
push $N26fb42e0
push $N235135f0
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup OpenSpline1 1049088 bezier
     {{cc
       {f 1056800}
       {p
        {}
        {{a osw 1 osf 0}     x44028000 x44220000}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {{a osw 1 osf x409c5a65}     x440d54e8 x43cf82d2}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {{a osw 1 osf x40fbe1c8}     x44060000 x43300000}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {{a osw 1 osf x421e6637}     x440f0000 x42b40000}
        {x40a87080 xc1080ae8}}}
      {cc
       {f 1056800}
       {p
        {}
        {}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {}
        {x40a87080 xc1080ae8}}}}
     {t x440a4000 x43a74000}
     {a osbe 0 osee 0 osw 1 osf 0 str 1 tt x41200000 ft x40400000}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {320 240}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 feather_type smooth
 openspline_width 1
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 name RotoPaint5
 xpos 3634
 ypos 556
}
push $N26de9660
Group {
 inputs 2
 name WaterLens6
 tile_color 0xffccff
 note_font Verdana
 xpos 3770
 ypos 549
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {517 118}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.975
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N26ebcc30 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N26ebcc30
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N26ed1b50 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N26ed86d0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N26edf110 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N26edf110
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N26ed86d0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N279209d0 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27922e90 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27922e90
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N279209d0
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.12
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N279b85f0 [stack 0]
push $N279b85f0
push $N26ed1b50
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44780000 x43b60000 x3d4860c8}
       {x44780000 x43b50000 x3e874087}
       {x44780000 x43b40000 x3e944894}
       {x44780000 x43b30000 x3e9e4c9e}
       {x44788000 x43b10000 x3ead54ad}
       {x44790000 x43b00000 x3eb254b2}
       {x44790000 x43ae0000 x3eb658b6}
       {x44798000 x43ab0000 x3eb958b9}
       {x447a0000 x43a90000 x3ebb5cbb}
       {x447a8000 x43a60000 x3ebe5cbe}
       {x447b0000 x43a40000 x3ec15cc1}
       {x447b0000 x43a20000 x3ec15cc1}
       {x447b8000 x43a00000 x3ec360c3}
       {x447b8000 x439e0000 x3ebf5cbf}
       {x447c0000 x439d0000 x3ec25cc2}
       {x447c0000 x439c0000 x3ec25cc2}
       {x447c0000 x439b0000 x3ec25cc2}
       {x447c0000 x439a0000 x3ec25cc2}}}
     {t x447a1555 x43a7d555}
     {a ro 0 go 0 bo 0 ao 0 bs x42d80000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 108 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 108 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 108
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 108
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint6
 xpos 3923
 ypos 448
}
push $N26de71a0
Group {
 inputs 2
 name WaterLens5
 tile_color 0xffccff
 note_font Verdana
 xpos 4058
 ypos 441
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {1002 334}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.99
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1.5
 addUserKnob {7 bend R -1 1}
 bend -0.07
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N27a0cf10 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N27a0cf10
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N27a21e30 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N27a289b0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27a2f3f0 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27a2f3f0
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N27a289b0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N26ca9920 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N26cabde0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N26cabde0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N26ca9920
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  gain 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N27ac6450 [stack 0]
push $N27ac6450
push $N27a21e30
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Merge2 {
 inputs 2
 name Merge1
 xpos 4058
 ypos 556
}
Merge2 {
 inputs 2
 name Merge2
 xpos 4058
 ypos 688
}
Merge2 {
 inputs 2
 name Merge4
 xpos 4058
 ypos 795
}
push $N26de1520
ZDefocus2 {
 size 25
 max_size 50
 legacy_resize_mode false
 show_legacy_resize_mode false
 bloom true
 bloom_gain 5
 name ZDefocus1
 xpos 4229
 ypos 493
}
Reformat {
 black_outside true
 name Reformat3
 xpos 4229
 ypos 581
}
Merge2 {
 inputs 2
 bbox B
 name Merge3
 xpos 4229
 ypos 795
}
Dot {
 name Dot28
 xpos 4263
 ypos 1357
}
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44200000 x43b40000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44614000 x438b0000 x3b800080}
       {x44614000 x438a8000 x3e4c60cc}
       {x44614000 x438a0000 x3e5260d2}
       {x44618000 x43890000 x3e6068e0}
       {x44618000 x43888000 x3e6670e6}
       {x44618000 x43880000 x3e6a70ea}
       {x44620000 x43880000 x3e6c70ec}
       {x44620000 x43868000 x3e7270f2}
       {x44620000 x43860000 x3e6e70ee}
       {x44624000 x43860000 x3e7678f6}}}
     {t x4461a666 x4388599a}
     {a ro 0 go 0 bo 0 ao 0 bs x42000000 bu 1 str 1 spx x44200000 spy x43b40000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 32 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 32 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 32
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 32
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint10
 xpos 1296
 ypos 745
}
Read {
 inputs 0
 file_type jpeg
 file <<<replace>>>/MJT_Labs/Draw/WaterLens_11/demo_script/waterLensExampleBG.jpg
 format "1280 720 0 0 1280 720 1 HD_720"
 origset true
 name Read4
 xpos 2480
 ypos -35
}
Dot {
 name Dot14
 xpos 2514
 ypos 228
}
set N232b47c0 [stack 0]
Dot {
 name Dot15
 xpos 2343
 ypos 228
}
set N232b55b0 [stack 0]
Dot {
 name Dot16
 xpos 2055
 ypos 228
}
set N232b7940 [stack 0]
Dot {
 name Dot17
 xpos 1796
 ypos 228
}
set N232b9cd0 [stack 0]
Dot {
 name Dot18
 xpos 1483
 ypos 228
}
Group {
 inputs 2
 name WaterLens10
 tile_color 0xffccff
 note_font Verdana
 xpos 1449
 ypos 738
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {902.5 274}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N2361c2f0 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N2361c2f0
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N23631210 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N1ecf3a20 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N1ecf70d0 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N1ecf70d0
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N1ecf3a20
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N234068e0 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N23408b10 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N23408b10
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N234068e0
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N268a0390 [stack 0]
push $N268a0390
push $N23631210
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x42d20000 x43ae8000 x3c904090}
       {x42d40000 x43ae8000 x3e2248a2}
       {x42d80000 x43ae8000 x3e5868d8}
       {x42dc0000 x43af0000 x3e6a70ea}
       {x42e20000 x43af8000 x3e7e78fe}
       {x42e60000 x43b08000 x3e864086}
       {x42ec0000 x43b18000 x3e8b448b}
       {x42f40000 x43b30000 x3e8d448d}
       {x42fc0000 x43b50000 x3e8f448f}
       {x43030000 x43b70000 x3e914491}
       {x43070000 x43b88000 x3e914491}
       {x430c0000 x43ba8000 x3e954895}
       {x43110000 x43bc8000 x3e944894}
       {x43150000 x43be8000 x3e954895}
       {x43190000 x43c08000 x3e954895}
       {x431c0000 x43c18000 x3e944894}
       {x431f0000 x43c30000 x3e944894}
       {x43200000 x43c40000 x3e964896}
       {x43230000 x43c50000 x3e974897}
       {x43230000 x43c58000 x3e974897}
       {x43240000 x43c60000 x3e984898}
       {x43250000 x43c70000 x3e994899}
       {x43250000 x43c78000 x3e9b4c9b}
       {x43270000 x43c80000 x3e9f4c9f}
       {x43270000 x43c88000 x3e9f4c9f}
       {x43270000 x43c80000 x3e9b4c9b}
       {x43270000 x43c78000 x3e9b4c9b}
       {x43250000 x43c60000 x3e9d4c9d}
       {x43250000 x43c58000 x3e9d4c9d}
       {x43240000 x43c40000 x3e9d4c9d}
       {x43240000 x43c30000 x3e9d4c9d}
       {x43240000 x43c18000 x3e9d4c9d}
       {x43240000 x43bf8000 x3e9e4c9e}
       {x43240000 x43be0000 x3e9d4c9d}
       {x43240000 x43bc0000 x3e9d4c9d}
       {x43240000 x43b98000 x3e9e4c9e}
       {x43240000 x43b78000 x3e9e4c9e}
       {x43240000 x43b50000 x3e9d4c9d}
       {x43240000 x43b30000 x3e9d4c9d}
       {x43250000 x43b08000 x3e9d4c9d}
       {x43270000 x43ae8000 x3e9d4c9d}
       {x43280000 x43ac0000 x3e9d4c9d}
       {x43290000 x43aa0000 x3e9d4c9d}
       {x432b0000 x43a78000 x3e9f4c9f}
       {x432c0000 x43a58000 x3ea04ca0}
       {x432e0000 x43a38000 x3e9f4c9f}
       {x43300000 x43a18000 x3ea04ca0}
       {x43320000 x439f8000 x3ea04ca0}
       {x43340000 x439e0000 x3e9f4c9f}
       {x43360000 x439c0000 x3ea04ca0}
       {x43370000 x439a8000 x3e9f4c9f}
       {x43390000 x43998000 x3e9f4c9f}
       {x433b0000 x43988000 x3e9f4c9f}
       {x433d0000 x43978000 x3ea04ca0}
       {x433e0000 x43968000 x3e9f4c9f}
       {x433f0000 x43960000 x3e9f4c9f}
       {x43400000 x43960000 x3ea04ca0}
       {x43420000 x43958000 x3e9f4c9f}
       {x43420000 x43950000 x3e9f4c9f}
       {x43430000 x43950000 x3ea04ca0}
       {x43440000 x43940000 x3e9f4c9f}
       {x43460000 x43940000 x3ea04ca0}
       {x43470000 x43938000 x3e9c4c9c}
       {x43480000 x43938000 x3e844084}
       {x43490000 x43938000 x3ddc60dc}}}
     {t x43232762 x43b001f8}
     {a ro 0 go 0 bo 0 ao 0 bs x43300000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 176 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush bs 176 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 176
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 motionblur_shutter_offset_type centred
 openspline_width 1
 brush_size 176
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint11
 xpos 1616
 ypos 638
}
push $N232b9cd0
Group {
 inputs 2
 name WaterLens11
 tile_color 0xffccff
 note_font Verdana
 xpos 1762
 ypos 631
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {183 331}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 bend -0.49
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.3
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N236c0a80 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N236c0a80
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N236d59a0 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N236dc520 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N236e2f60 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N236e2f60
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N236dc520
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N2349d220 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N2349f6e0 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N2349f6e0
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N2349d220
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N26a30d50 [stack 0]
push $N26a30d50
push $N236d59a0
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup OpenSpline1 1049088 bezier
     {{cc
       {f 1056800}
       {p
        {}
        {{a osw 1 osf 0}     x44028000 x44220000}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {{a osw 1 osf x409c5a65}     x440d54e8 x43cf82d2}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {{a osw 1 osf x40fbe1c8}     x44060000 x43300000}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {{a osw 1 osf x421e6637}     x440f0000 x42b40000}
        {x40a87080 xc1080ae8}}}
      {cc
       {f 1056800}
       {p
        {}
        {}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {}
        {x40a87080 xc1080ae8}}}}
     {t x440a4000 x43a74000}
     {a osbe 0 osee 0 osw 1 osf 0 str 1 tt x41200000 ft x40400000}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {320 240}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 feather_type smooth
 openspline_width 1
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 name RotoPaint12
 xpos 1885
 ypos 506
}
push $N232b7940
Group {
 inputs 2
 name WaterLens12
 tile_color 0xffccff
 note_font Verdana
 xpos 2021
 ypos 499
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {517 118}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.975
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N2690b680 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N2690b680
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N269205a0 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N26927120 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N2692db60 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N2692db60
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N26927120
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N26aa5060 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N26aa7520 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N26aa7520
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N26aa5060
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.12
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N2696b790 [stack 0]
push $N2696b790
push $N269205a0
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
RotoPaint {
 inputs 0
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44780000 x43b60000 x3d4860c8}
       {x44780000 x43b50000 x3e874087}
       {x44780000 x43b40000 x3e944894}
       {x44780000 x43b30000 x3e9e4c9e}
       {x44788000 x43b10000 x3ead54ad}
       {x44790000 x43b00000 x3eb254b2}
       {x44790000 x43ae0000 x3eb658b6}
       {x44798000 x43ab0000 x3eb958b9}
       {x447a0000 x43a90000 x3ebb5cbb}
       {x447a8000 x43a60000 x3ebe5cbe}
       {x447b0000 x43a40000 x3ec15cc1}
       {x447b0000 x43a20000 x3ec15cc1}
       {x447b8000 x43a00000 x3ec360c3}
       {x447b8000 x439e0000 x3ebf5cbf}
       {x447c0000 x439d0000 x3ec25cc2}
       {x447c0000 x439c0000 x3ec25cc2}
       {x447c0000 x439b0000 x3ec25cc2}
       {x447c0000 x439a0000 x3ec25cc2}}}
     {t x447a1555 x43a7d555}
     {a ro 0 go 0 bo 0 ao 0 bs x42d80000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 108 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 108 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 108
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 108
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint13
 xpos 2174
 ypos 398
}
push $N232b55b0
Group {
 inputs 2
 name WaterLens13
 tile_color 0xffccff
 note_font Verdana
 xpos 2309
 ypos 391
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {1002 334}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.99
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1.5
 addUserKnob {7 bend R -1 1}
 bend -0.07
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 output element
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N26c3b610 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N26c3b610
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N26988790 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N2698c430 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N26997210 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N26997210
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N2698c430
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N269d4180 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N269d6640 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N269d6640
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N269d4180
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  gain 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N26d57e30 [stack 0]
push $N26d57e30
push $N26988790
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Merge2 {
 inputs 2
 name Merge6
 xpos 2309
 ypos 506
}
Merge2 {
 inputs 2
 name Merge7
 xpos 2309
 ypos 638
}
Merge2 {
 inputs 2
 name Merge8
 xpos 2309
 ypos 745
}
ZDefocus2 {
 size 10
 legacy_resize_mode false
 show_legacy_resize_mode false
 bloom true
 bloom_gain 7
 name ZDefocus3
 xpos 2309
 ypos 906
}
Reformat {
 black_outside true
 name Reformat2
 xpos 2309
 ypos 994
}
push $N232b47c0
Merge2 {
 inputs 2
 bbox B
 name Merge9
 xpos 2480
 ypos 994
}
Dot {
 name Dot29
 xpos 2514
 ypos 1383
}
Read {
 inputs 0
 file_type jpeg
 file <<<replace>>>/MJT_Labs/Draw/WaterLens_11/demo_script/waterLensExampleBG.jpg
 format "1280 720 0 0 1280 720 1 HD_720"
 origset true
 name Read3
 xpos 757
 ypos -9
}
Dot {
 name Dot2
 xpos 791
 ypos 260
}
set N278d4390 [stack 0]
Dot {
 name Dot1
 xpos 615
 ypos 260
}
set N278d6850 [stack 0]
Dot {
 name Dot3
 xpos 478
 ypos 260
}
set N278d8d10 [stack 0]
Dot {
 name Dot5
 xpos 328
 ypos 260
}
set N278db1d0 [stack 0]
Dot {
 name Dot9
 xpos 178
 ypos 260
}
RotoPaint {
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44200000 x43b40000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44614000 x438b0000 x3b800080}
       {x44614000 x438a8000 x3e4c60cc}
       {x44614000 x438a0000 x3e5260d2}
       {x44618000 x43890000 x3e6068e0}
       {x44618000 x43888000 x3e6670e6}
       {x44618000 x43880000 x3e6a70ea}
       {x44620000 x43880000 x3e6c70ec}
       {x44620000 x43868000 x3e7270f2}
       {x44620000 x43860000 x3e6e70ee}
       {x44624000 x43860000 x3e7678f6}}}
     {t x4461a666 x4388599a}
     {a ro 0 go 0 bo 0 ao 0 bs x42000000 bu 1 str 1 spx x44200000 spy x43b40000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 32 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 32 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 32
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {640 360}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 32
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint7
 xpos 144
 ypos 355
}
Dot {
 name Dot10
 xpos 178
 ypos 776
}
push $N278db1d0
RotoPaint {
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097664}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x42d20000 x43ae8000 x3c904090}
       {x42d40000 x43ae8000 x3e2248a2}
       {x42d80000 x43ae8000 x3e5868d8}
       {x42dc0000 x43af0000 x3e6a70ea}
       {x42e20000 x43af8000 x3e7e78fe}
       {x42e60000 x43b08000 x3e864086}
       {x42ec0000 x43b18000 x3e8b448b}
       {x42f40000 x43b30000 x3e8d448d}
       {x42fc0000 x43b50000 x3e8f448f}
       {x43030000 x43b70000 x3e914491}
       {x43070000 x43b88000 x3e914491}
       {x430c0000 x43ba8000 x3e954895}
       {x43110000 x43bc8000 x3e944894}
       {x43150000 x43be8000 x3e954895}
       {x43190000 x43c08000 x3e954895}
       {x431c0000 x43c18000 x3e944894}
       {x431f0000 x43c30000 x3e944894}
       {x43200000 x43c40000 x3e964896}
       {x43230000 x43c50000 x3e974897}
       {x43230000 x43c58000 x3e974897}
       {x43240000 x43c60000 x3e984898}
       {x43250000 x43c70000 x3e994899}
       {x43250000 x43c78000 x3e9b4c9b}
       {x43270000 x43c80000 x3e9f4c9f}
       {x43270000 x43c88000 x3e9f4c9f}
       {x43270000 x43c80000 x3e9b4c9b}
       {x43270000 x43c78000 x3e9b4c9b}
       {x43250000 x43c60000 x3e9d4c9d}
       {x43250000 x43c58000 x3e9d4c9d}
       {x43240000 x43c40000 x3e9d4c9d}
       {x43240000 x43c30000 x3e9d4c9d}
       {x43240000 x43c18000 x3e9d4c9d}
       {x43240000 x43bf8000 x3e9e4c9e}
       {x43240000 x43be0000 x3e9d4c9d}
       {x43240000 x43bc0000 x3e9d4c9d}
       {x43240000 x43b98000 x3e9e4c9e}
       {x43240000 x43b78000 x3e9e4c9e}
       {x43240000 x43b50000 x3e9d4c9d}
       {x43240000 x43b30000 x3e9d4c9d}
       {x43250000 x43b08000 x3e9d4c9d}
       {x43270000 x43ae8000 x3e9d4c9d}
       {x43280000 x43ac0000 x3e9d4c9d}
       {x43290000 x43aa0000 x3e9d4c9d}
       {x432b0000 x43a78000 x3e9f4c9f}
       {x432c0000 x43a58000 x3ea04ca0}
       {x432e0000 x43a38000 x3e9f4c9f}
       {x43300000 x43a18000 x3ea04ca0}
       {x43320000 x439f8000 x3ea04ca0}
       {x43340000 x439e0000 x3e9f4c9f}
       {x43360000 x439c0000 x3ea04ca0}
       {x43370000 x439a8000 x3e9f4c9f}
       {x43390000 x43998000 x3e9f4c9f}
       {x433b0000 x43988000 x3e9f4c9f}
       {x433d0000 x43978000 x3ea04ca0}
       {x433e0000 x43968000 x3e9f4c9f}
       {x433f0000 x43960000 x3e9f4c9f}
       {x43400000 x43960000 x3ea04ca0}
       {x43420000 x43958000 x3e9f4c9f}
       {x43420000 x43950000 x3e9f4c9f}
       {x43430000 x43950000 x3ea04ca0}
       {x43440000 x43940000 x3e9f4c9f}
       {x43460000 x43940000 x3ea04ca0}
       {x43470000 x43938000 x3e9c4c9c}
       {x43480000 x43938000 x3e844084}
       {x43490000 x43938000 x3ddc60dc}}}
     {t x43232762 x43b001f8}
     {a ro 0 go 0 bo 0 ao 0 bs x43300000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 176 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush bs 176 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 176
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 motionblur_shutter_offset_type centred
 openspline_width 1
 brush_size 176
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint3
 xpos 294
 ypos 357
}
Dot {
 name Dot6
 xpos 328
 ypos 632
}
push $N278d8d10
RotoPaint {
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {curvegroup OpenSpline1 1049088 bezier
     {{cc
       {f 1056800}
       {p
        {}
        {{a osw 1 osf 0}     x44028000 x44220000}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {{a osw 1 osf x409c5a65}     x440d54e8 x43cf82d2}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {{a osw 1 osf x40fbe1c8}     x44060000 x43300000}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {{a osw 1 osf x421e6637}     x440f0000 x42b40000}
        {x40a87080 xc1080ae8}}}
      {cc
       {f 1056800}
       {p
        {}
        {}
        {x41400000 xc2180000}
        {xc0aa7400 x427fe970}
        {}
        {x410a7900 xc2cfe580}
        {xc1200000 x42580000}
        {}
        {x41200000 xc2580000}
        {xc0d00000 x41280000}
        {}
        {x40a87080 xc1080ae8}}}}
     {t x440a4000 x43a74000}
     {a osbe 0 osee 0 osw 1 osf 0 str 1 tt x41200000 ft x40400000}}}}}}
 toolbox {selectAll {
  { selectAll str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 tt 4 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createOpenSpline str 1 ssx 1 ssy 1 sf 1 tt 10 }
  { addPoints str 1 ssx 1 ssy 1 sf 1 }
  { brush str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_hardness 0.200000003
 toolbar_openspline_width 1
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {320 240}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_shutter_offset_type centred
 feather_type smooth
 openspline_width 1
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 name RotoPaint2
 xpos 444
 ypos 356
}
Dot {
 name Dot4
 xpos 478
 ypos 493
}
push $N278d6850
RotoPaint {
 curves {{{v x3f99999a}
  {f 0}
  {n
   {layer Root
    {f 2097152}
    {t x44800000 x44428000}
    {a pt1x 0 pt1y 0 pt2x 0 pt2y 0 pt3x 0 pt3y 0 pt4x 0 pt4y 0 ptex00 0 ptex01 0 ptex02 0 ptex03 0 ptex10 0 ptex11 0 ptex12 0 ptex13 0 ptex20 0 ptex21 0 ptex22 0 ptex23 0 ptex30 0 ptex31 0 ptex32 0 ptex33 0 ptof1x 0 ptof1y 0 ptof2x 0 ptof2y 0 ptof3x 0 ptof3y 0 ptof4x 0 ptof4y 0 pterr 0 ptrefset 0 ptmot x40800000 ptref 0}
    {cubiccurve Brush1 512 catmullrom
     {cc
      {f 2080}
      {p
       {x44780000 x43b60000 x3d4860c8}
       {x44780000 x43b50000 x3e874087}
       {x44780000 x43b40000 x3e944894}
       {x44780000 x43b30000 x3e9e4c9e}
       {x44788000 x43b10000 x3ead54ad}
       {x44790000 x43b00000 x3eb254b2}
       {x44790000 x43ae0000 x3eb658b6}
       {x44798000 x43ab0000 x3eb958b9}
       {x447a0000 x43a90000 x3ebb5cbb}
       {x447a8000 x43a60000 x3ebe5cbe}
       {x447b0000 x43a40000 x3ec15cc1}
       {x447b0000 x43a20000 x3ec15cc1}
       {x447b8000 x43a00000 x3ec360c3}
       {x447b8000 x439e0000 x3ebf5cbf}
       {x447c0000 x439d0000 x3ec25cc2}
       {x447c0000 x439c0000 x3ec25cc2}
       {x447c0000 x439b0000 x3ec25cc2}
       {x447c0000 x439a0000 x3ec25cc2}}}
     {t x447a1555 x43a7d555}
     {a ro 0 go 0 bo 0 ao 0 bs x42d80000 bu 1 str 1 spx x44800000 spy x44428000 sb 1 tt x41880000}}}}}}
 toolbox {brush {
  { selectAll bs 108 str 1 ssx 1 ssy 1 sf 1 }
  { createBezier str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBezierCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createBSpline str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createEllipse str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangle str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { createRectangleCusped str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { brush bs 108 str 1 ssx 1 ssy 1 sf 1 sb 1 ltt 0 tt 17 }
  { eraser src 2 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { clone src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { reveal src 3 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { dodge src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { burn src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { blur src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { sharpen src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
  { smear src 1 str 1 ssx 1 ssy 1 sf 1 sb 1 }
} }
 toolbar_brush_size 108
 toolbar_brush_hardness 0.200000003
 toolbar_source_transform_scale {1 1}
 toolbar_source_transform_center {1024 778}
 colorOverlay {0 0 0 0}
 lifetime_type "all frames"
 motionblur_on true
 brush_size 108
 brush_spacing 0.05000000075
 brush_hardness 0.200000003
 source_black_outside true
 name RotoPaint1
 xpos 581
 ypos 356
}
push $N278d4390
Group {
 inputs 2
 name WaterLens1
 tile_color 0xffccff
 note_font Verdana
 xpos 757
 ypos 349
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {1002 334}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.99
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1.5
 addUserKnob {7 bend R -1 1}
 bend -0.07
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 defocus_value 10
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N27d20b10 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N27d20b10
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N27d35a30 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N27d3c5b0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27d42ff0 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27d42ff0
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N27d3c5b0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N27d808a0 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27d82d60 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27d82d60
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N27d808a0
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  gain 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N27dc3c40 [stack 0]
push $N27dc3c40
push $N27d35a30
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Group {
 inputs 2
 name WaterLens2
 tile_color 0xffccff
 note_font Verdana
 xpos 757
 ypos 483
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {517 118}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.975
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 defocus_value 10
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N27f93e60 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N27f93e60
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N27fa8d80 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N27faf900 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27fb6340 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27fb6340
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N27faf900
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N27ff3660 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27ff5b20 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27ff5b20
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N27ff3660
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.12
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N28879440 [stack 0]
push $N28879440
push $N27fa8d80
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Group {
 inputs 2
 name WaterLens3
 tile_color 0xffccff
 note_font Verdana
 xpos 757
 ypos 622
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {183 331}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 0.8
 addUserKnob {7 bend R -1 1}
 bend -0.49
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.3
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 defocus_value 10
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N288a8a60 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N288a8a60
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N288bd980 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N288c4500 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27dda450 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27dda450
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N288c4500
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N288e1c60 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N288e4120 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N288e4120
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N288e1c60
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N28a7de30 [stack 0]
push $N28a7de30
push $N288bd980
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Group {
 inputs 2
 name WaterLens4
 tile_color 0xffccff
 note_font Verdana
 xpos 757
 ypos 766
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 center {902.5 274}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 0.96
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 1
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 defocus_value 10
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 7
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N23581e10 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N23581e10
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N23596e70 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N2359d9f0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N235a4430 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N235a4430
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N2359d9f0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N27e5dc70 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27e60130 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27e60130
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N27e5dc70
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  contrast 1.1
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N28b221a0 [stack 0]
push $N28b221a0
push $N23596e70
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.5 0 -0.5}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
Dot {
 name Dot30
 xpos 791
 ypos 1412
}
Group {
 inputs 0
 name WaterLens
 tile_color 0xffccff
 xpos 143
 ypos -619
 addUserKnob {20 tab_general l General}
 addUserKnob {12 center}
 addUserKnob {26 ""}
 addUserKnob {7 zdistortion l "z distortion"}
 zdistortion 1
 addUserKnob {7 edgeScale l "edge scale" R 0 4}
 edgeScale 1
 addUserKnob {7 bend R -1 1}
 addUserKnob {41 filter l "distortion filter" T IDistort1.filter}
 addUserKnob {7 matte_filter l "matte filter"}
 matte_filter 0.2
 addUserKnob {26 ""}
 addUserKnob {41 abberation T killPanel.abberation}
 addUserKnob {26 ""}
 addUserKnob {20 grp_cc l "color correction" n 1}
 grp_cc 0
 addUserKnob {41 saturation T ColorCorrect.saturation}
 addUserKnob {41 contrast T ColorCorrect.contrast}
 addUserKnob {41 gamma T ColorCorrect.gamma}
 addUserKnob {41 gain T ColorCorrect.gain}
 addUserKnob {41 offset T ColorCorrect.offset}
 addUserKnob {20 endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {4 output M {composite element}}
 addUserKnob {20 tab_defocus l Defocus}
 addUserKnob {7 defocus_value l "defocus value" R 0 100}
 addUserKnob {26 ""}
 addUserKnob {41 auto_layer_spacing l "automatic layer spacing" T dof_setting2.auto_layer_spacing}
 addUserKnob {3 depth_layers l "depth layers" +DISABLED}
 depth_layers 50
 addUserKnob {7 layer_curve +DISABLED R 0 5}
 layer_curve 1
 addUserKnob {26 ""}
 addUserKnob {41 filter_type l "filter type" T ZDefocus.filter_type}
 addUserKnob {7 filter_shape l "filter shape"}
 filter_shape 1
 addUserKnob {7 aspect_ratio l "aspect ratio" R 0.5 2}
 aspect_ratio 1
 addUserKnob {3 blades +HIDDEN}
 blades 5
 addUserKnob {7 roundness +HIDDEN R -1 1}
 roundness 0.2
 addUserKnob {7 rotation +HIDDEN R 0 360}
 addUserKnob {7 inner_size l "inner size" +HIDDEN}
 inner_size 0.8
 addUserKnob {7 inner_feather l "inner feather" +HIDDEN}
 inner_feather 1
 addUserKnob {7 inner_brightness l "inner brightness" +HIDDEN}
 inner_brightness 0.8
 addUserKnob {7 catadioptric_size l "catadioptric size" +HIDDEN}
 catadioptric_size 0.3
 addUserKnob {6 catadioptric -STARTLINE +HIDDEN}
 addUserKnob {20 grp_image l "image filter" n 1}
 grp_image 0
 addUserKnob {41 filter_channel l "filter channel" T ZDefocus.filter_channel}
 addUserKnob {41 use_input_channels l "use input channels" -STARTLINE T ZDefocus.use_input_channels}
 addUserKnob {41 image_filter l "image filter" T ZDefocus.image_filter}
 addUserKnob {41 clamp_image_filter l "clamp image filter" -STARTLINE T ZDefocus.clamp_image_filter}
 addUserKnob {20 endGroup_1 l endGroup n -1}
 addUserKnob {26 ""}
 addUserKnob {6 gamma_correction l "gamma correction" +STARTLINE}
 addUserKnob {41 bloom -STARTLINE T dof_setting.bloom}
 addUserKnob {7 bloom_threshold l "bloom threshold"}
 bloom_threshold 0.8
 addUserKnob {7 bloom_gain l "bloom gain" R 1 4}
 bloom_gain 2
 addUserKnob {20 t_VERSION l Version}
 addUserKnob {26 l_VERSION l <b>Version</b> T 1.1}
 addUserKnob {26 l_DATE l "<b>Date Modified</b>" T 2019-04-17}
 addUserKnob {26 l_CHANGELOG l <b>Changelog</b> T "1.1\n- soften abberation\n\n1.0\n- create water droplet"}
 addUserKnob {26 l_DEV l "<b>Developed by</b>" T "Mark Joey Tang"}
}
 BackdropNode {
  inputs 0
  name BackdropNode1
  tile_color 0xff
  label "dont touch"
  note_font_size 42
  xpos -424
  ypos 1127
  bdwidth 353
  bdheight 281
 }
 Input {
  inputs 0
  name filter
  xpos -812
  ypos 1264
  number 2
 }
 Input {
  inputs 0
  name mask
  xpos -1138
  ypos -508
  number 1
 }
 Shuffle {
  red alpha
  green alpha
  blue alpha
  name Shuffle1
  xpos -1138
  ypos -421
 }
 Dot {
  name Dot2
  xpos -1104
  ypos -213
 }
set N27c12c40 [stack 0]
 Histogram {
  in {{0.2-(parent.matte_filter/10)} 1 {0.2+(parent.matte_filter/10)}}
  name Histogram1
  xpos -1138
  ypos 46
 }
 Shuffle {
  red black
  green black
  blue black
  alpha red
  name Shuffle3
  xpos -1138
  ypos 126
 }
 Dot {
  name Dot7
  xpos -1104
  ypos 814
 }
push $N27c12c40
 Input {
  inputs 0
  name img
  xpos 221
  ypos -515
 }
 Dot {
  name Dot1
  xpos 255
  ypos -348
 }
set N27c27b60 [stack 0]
 Remove {
  operation keep
  channels rgb
  name Remove2
  xpos 38
  ypos -351
 }
 Dot {
  name Dot5
  xpos -326
  ypos -348
 }
set N27c2e6e0 [stack 0]
 Remove {
  name Remove1
  xpos -552
  ypos -355
 }
 Dot {
  name Dot4
  xpos -647
  ypos -348
 }
set N27c35120 [stack 0]
 Dot {
  name Dot3
  xpos -866
  ypos -348
 }
 Merge2 {
  inputs 2
  name Merge1
  xpos -900
  ypos -216
 }
 FilterErode {
  size {{1000-(parent.zdistortion*1000)} {1000-(parent.zdistortion*1000)}}
  filter gaussian
  name FilterErode1
  xpos -900
  ypos -136
 }
 Invert {
  channels alpha
  name Invert1
  xpos -900
  ypos -25
 }
 Shuffle {
  red black
  green black
  blue alpha
  alpha black
  name Shuffle2
  xpos -900
  ypos 54
 }
push $N27c35120
 Expression {
  expr0 "(x-\[value center.x])/width"
  expr1 "(y-\[value center.y])/height"
  name Expression1
  xpos -681
  ypos -26
  addUserKnob {20 User}
  addUserKnob {12 center}
  center {{parent.center} {parent.center}}
 }
 Merge2 {
  inputs 2
  operation plus
  name Merge2
  xpos -681
  ypos 54
 }
 Grade {
  channels {rgba.red rgba.green -rgba.blue none}
  blackpoint {{parent.bend*0.5}}
  white {{parent.zdistortion/10}}
  gamma {{parent.edgeScale}}
  black_clamp false
  maskChannelInput rgba.blue
  name Grade1
  xpos -681
  ypos 144
 }
 Dot {
  name Dot6
  xpos -647
  ypos 498
 }
push $N27c2e6e0
 Crop {
  box {0 0 {input.width} {input.height}}
  crop false
  name Crop1
  xpos -360
  ypos -274
 }
 Dot {
  name Dot8
  xpos -326
  ypos -77
 }
set N27c729d0 [stack 0]
 Dot {
  name Dot10
  xpos -215
  ypos -77
 }
set N27c74e90 [stack 0]
 Dot {
  name Dot9
  xpos -106
  ypos -77
 }
 Shuffle {
  red black
  green black
  alpha black
  name blue
  tile_color 0xffff
  xpos -140
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.b/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform2
  xpos -140
  ypos 77
 }
 Blur {
  channels {-rgba.red -rgba.green rgba.blue none}
  size {{abs(parent.abberation.b*10)}}
  name Blur3
  xpos -140
  ypos 147
 }
 Dot {
  name Dot12
  xpos -106
  ypos 320
 }
push $N27c74e90
 Shuffle {
  red black
  blue black
  alpha black
  name green
  tile_color 0xff00ff
  xpos -249
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.g/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform4
  xpos -249
  ypos 77
 }
 Blur {
  channels {-rgba.red rgba.green -rgba.blue none}
  size {{abs(parent.abberation.g*10)}}
  name Blur2
  xpos -249
  ypos 147
 }
 Dot {
  name Dot11
  xpos -215
  ypos 240
 }
push $N27c729d0
 Shuffle {
  green black
  blue black
  alpha black
  name red
  tile_color 0xff0000ff
  xpos -360
  ypos -3
 }
 Transform {
  scale {{1+(parent.abberation.r/10)}}
  center {{parent.center} {parent.center}}
  invert_matrix true
  black_outside false
  name Transform1
  xpos -360
  ypos 77
 }
 Blur {
  channels {rgba.red -rgba.green -rgba.blue none}
  size {{abs(parent.abberation.r*10)}}
  name Blur1
  xpos -360
  ypos 149
 }
 Merge2 {
  inputs 2
  operation max
  name Merge5
  xpos -360
  ypos 237
 }
 Merge2 {
  inputs 2
  operation max
  name Merge6
  xpos -360
  ypos 317
 }
 ShuffleCopy {
  inputs 2
  red red
  green green
  out forward
  name ShuffleCopy1
  xpos -360
  ypos 495
 }
 IDistort {
  channels rgb
  uv forward
  uv_scale -4750
  name IDistort1
  xpos -360
  ypos 575
 }
 Shuffle {
  alpha white
  name Shuffle4
  xpos -360
  ypos 655
 }
 ColorCorrect {
  name ColorCorrect
  xpos -360
  ypos 735
 }
 Merge2 {
  inputs 2
  operation mask
  name Merge3
  xpos -360
  ypos 811
 }
 Shuffle {
  red black
  green black
  blue black
  alpha black
  out depth
  name Shuffle5
  xpos -360
  ypos 933
 }
 ZDefocus2 {
  inputs 2
  channels rgba
  focal_point {10000 10000}
  size {{parent.defocus_value}}
  max_size {{parent.defocus_value}}
  autoLayerSpacing {{parent.auto_layer_spacing}}
  layers {{parent.depth_layers}}
  layerCurve {{parent.layer_curve}}
  legacy_resize_mode false
  show_legacy_resize_mode false
  shape {{parent.filter_shape}}
  aspect {{parent.aspect_ratio}}
  blades {{parent.blades}}
  roundness {{parent.roundness}}
  rotation {{parent.rotation}}
  inner_size {{parent.inner_size}}
  inner_feather {{parent.inner_feather}}
  inner_brightness {{parent.inner_brightness}}
  catadioptric_size {{parent.catadioptric_size}}
  catadioptric {{parent.catadioptric}}
  bloom_gamma {{parent.gamma_correction}}
  bloom {{parent.bloom}}
  bloom_threshold {{parent.bloom_threshold}}
  bloom_gain {{parent.bloom_gain}}
  name ZDefocus
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['filter_shape','aspect_ratio','blades','roundness','rotation','inner_size','inner_feather','inner_brightness','catadioptric_size','catadioptric']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['filter_type'].getValue() == 0 :\n        if i < 2 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    elif thisGRP\['filter_type'].getValue() == 1 :\n        if i != 0 :\n            thisGRP\[knob_ls\[i]].setVisible(True)\n        else :\n            thisGRP\[knob_ls\[i]].setVisible(False)\n    else :\n        thisGRP\[knob_ls\[i]].setVisible(False)\n"
  xpos -360
  ypos 1260
  disable {{"parent.defocus_value <= 1 ? 1 : 0"}}
 }
 Remove {
  operation keep
  channels rgba
  name Remove3
  xpos -360
  ypos 1562
 }
 Dot {
  name Dot13
  xpos -326
  ypos 1642
 }
set N278b2140 [stack 0]
push $N278b2140
push $N27c27b60
 Merge2 {
  inputs 2
  bbox B
  name Merge4
  xpos 221
  ypos 1639
 }
 Switch {
  inputs 2
  which {{output}}
  name Switch1
  xpos 221
  ypos 1865
 }
 Output {
  name Output1
  xpos 221
  ypos 2076
 }
 NoOp {
  inputs 0
  name killPanel
  knobChanged "\nthisNODE = nuke.thisNode()\nfor knob in thisNODE.knobs() :\n    if knob\[:11] == 'abberation_' :\n        thisNODE.removeKnob(thisNODE\[knob])\n"
  xpos -203
  ypos 1199
  addUserKnob {20 User}
  addUserKnob {18 abberation}
  abberation {0.2 0 -0.2}
  addUserKnob {6 abberation_panelDropped l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1 l "panel dropped state" -STARTLINE +HIDDEN}
  addUserKnob {6 abberation_panelDropped_1_1 l "panel dropped state" -STARTLINE +HIDDEN}
 }
 NoOp {
  inputs 0
  name dof_setting
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['bloom_threshold','bloom_gain']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['bloom'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n"
  xpos -202
  ypos 1258
  addUserKnob {20 User}
  addUserKnob {6 bloom +STARTLINE}
  bloom true
 }
 NoOp {
  inputs 0
  name dof_setting2
  knobChanged "\nthisGRP = nuke.thisGroup()\nknob_ls = \['depth_layers','layer_curve']\nfor i in range( len(knob_ls) ) :\n    if thisGRP\['auto_layer_spacing'].getValue() == 0 :\n        thisGRP\[knob_ls\[i]].setEnabled(True)\n    else :\n        thisGRP\[knob_ls\[i]].setEnabled(False)\n"
  xpos -203
  ypos 1322
  addUserKnob {20 User}
  addUserKnob {6 auto_layer_spacing l "automatic layer spacing" +STARTLINE}
  auto_layer_spacing true
 }
end_group
